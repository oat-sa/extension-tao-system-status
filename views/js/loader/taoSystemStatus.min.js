define("tpl!taoSystemStatus/controller/SystemStatus/reportDetailsModal",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,options,buffer="",helperMissing=helpers.helperMissing,escapeExpression=this.escapeExpression,functionType="function";return buffer+="<div class=\"modal report-details-modal\">\n    <section>\n        <h1>\n            "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Task data",options):helperMissing.call(depth0,"__","Task data",options)))+"\n        </h1>\n        ",(helper=helpers.data)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.data,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n    </section>\n</div>",buffer})}),define("taoSystemStatus/widgets/executionStatistics",["jquery","lodash","i18n","ui/component","util/url","c3"],function($,_,__,component,url,c3){"use strict";function getInterval(){return $(".js-execution-statistics-interval").val()}function factory(config){function getChartConfig(){const interval=getInterval();return _.merge({},initConfig,{graphConfig:{data:{url:url.route("executionsStatistics","PerformanceMonitoring","taoSystemStatus",{interval:interval})},axis:{x:{tick:{format:"P1D"===interval?"%H:%M":"%m-%d"},label:{text:"P1D"===interval?__("Hours"):__("Days")}}}}})}var chart,initConfig=_.merge({},_defaults,config),graph={refresh:function refresh(newConfig){chart&&(initConfig=_.merge({},initConfig,newConfig),chart.internal.config.axis_x_tick_format=initConfig.graphConfig.axis.x.tick.format,chart.axis.labels({x:initConfig.graphConfig.axis.x.label.text}),chart.load(initConfig.graphConfig.data))}};return $(".js-execution-statistics-interval").on("change",function(){graph.refresh(getChartConfig())}),component(graph).on("render",function(){chart=c3.generate(getChartConfig().graphConfig)}).on("destroy",function(){chart.destroy(),chart=null}).init(initConfig)}var _defaults={graphConfig:{bindto:".js-execution-statistics-graph",padding:{bottom:0,left:0},data:{url:url.route("executionsStatistics","PerformanceMonitoring","taoSystemStatus",{interval:getInterval()}),x:"time",xFormat:"%Y-%m-%d %H:%M:%S",mimeType:"json",type:"bar"},bar:{width:{ratio:.7}},tooltip:{format:{title:function(x,y){return new Date(Date.parse(x)).toUTCString()}}},axis:{x:{type:"timeseries",tick:{format:"%H:%M"},label:{position:"bottom center"}},y:{inner:!0,label:{position:"outer-top"}}}}};return factory}),define("taoSystemStatus/controller/PerformanceMonitoring/index",["tpl!taoSystemStatus/controller/SystemStatus/reportDetailsModal","taoSystemStatus/widgets/executionStatistics"],function(layout,executionStatisticsFactory){"use strict";return{start:function(){var executionStatistics;executionStatistics=executionStatisticsFactory(),executionStatistics.render()}}}),define("taoSystemStatus/controller/routes",[],function(){"use strict";return{SystemStatus:{actions:{index:"controller/SystemStatus/index"}},PerformanceMonitoring:{actions:{index:"controller/PerformanceMonitoring/index"}}}}),define("taoSystemStatus/tasksMonitoring/tasksStatistics",["jquery","lodash","i18n","ui/component","util/url","c3"],function($,_,__,component,url,c3){"use strict";function getInterval(){return $(".js-tasks-statistics-interval").val()}function getData(period){return $(".js-tasks-graph").data("statistics")[period]}function tasksGraphFactory(config){function getChartConfig(){var newConfig,interval=getInterval(),data=getData(interval);return newConfig=_.merge({},_defaults,{graphConfig:{data:{json:data},axis:{x:{tick:{format:"P1D"===interval?"%H:%M":"%m-%d"},label:{text:"P1D"===interval?__("Hours"):__("Days")}}}}}),newConfig}var chart,initConfig=_.merge({},_defaults,config),activityGraph={refresh:function refresh(newConfig){chart&&(initConfig=_.merge({},initConfig,newConfig),chart.internal.config.axis_x_tick_format=initConfig.graphConfig.axis.x.tick.format,chart.axis.labels({x:initConfig.graphConfig.axis.x.label.text}),chart.load(newConfig.graphConfig.data))}};return $(".js-tasks-statistics-interval").on("change",function(){activityGraph.refresh(getChartConfig())}),component(activityGraph).on("render",function(){$(".modal .js-tasks-graph-container").show(),chart=c3.generate(getChartConfig().graphConfig)}).on("destroy",function(){$(".js-tasks-graph-container").hide(),chart.destroy(),chart=null}).init(initConfig)}var _defaults={graphConfig:{bindto:".js-tasks-graph",padding:{bottom:0,left:0},data:{x:"time",xFormat:"%Y-%m-%d %H:%M:%S",mimeType:"json",type:"line",names:{amount:__("Tasks processed"),average:__("Average processing time, s")}},tooltip:{format:{title:function(x,y){return new Date(Date.parse(x)).toUTCString()}}},axis:{x:{type:"timeseries",tick:{format:"%H:%M"},label:{position:"bottom center"}},y:{inner:!0,label:{position:"outer-top"}}}}};return tasksGraphFactory}),define("taoSystemStatus/controller/SystemStatus/index",["tpl!taoSystemStatus/controller/SystemStatus/reportDetailsModal","taoSystemStatus/tasksMonitoring/tasksStatistics"],function(layout,tasksStatisticsFactory){"use strict";function showTaskReport($modalContent){var $modal=$(layout({data:$modalContent.html()}));$container.append($modal),$modal.modal({startClosed:!0,minWidth:450}),$modal.modal("open"),$modal.on("closed.modal",function(){$modal.modal("destroy"),$(this).remove()})}var $container;return{start:function(){var tasksStatistics;$container=$("#system-status-report"),$container.on("click",".js-feedback-details-button",function(){var $modalContent=$(this).closest(".js-report").find(".js-feedback-details");showTaskReport($modalContent)}),tasksStatistics=tasksStatisticsFactory(),tasksStatistics.render()}}}),define("taoSystemStatus/loader/taoSystemStatus.bundle",function(){});
//# sourceMappingURL=taoSystemStatus.min.js.map